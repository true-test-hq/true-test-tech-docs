# Groups Module

## Описание
Модуль `Groups` отвечает за управление группами участников.
Администраторы могут создавать группы, добавлять в них участников и использовать группы для назначения заданий или доступов.

## Основные возможности
-   **Управление группами**:
    -   Создание групп.
    -   Получение списка групп.
    -   Архивация групп.
-   **Управление составом**:
    -   Добавление участников в группу.
    -   Удаление участников из группы.

## Доменные сущности

### Group (Группа)
Группа участников, созданная администратором.

**Поля:**
-   `id`: Уникальный идентификатор группы.
-   `creatorProfileId`: ID профиля администратора, создавшего группу.
-   `title`: Название группы.
-   `students`: Список ID профилей участников, входящих в группу.
-   `status`: Статус группы (`active`, `archived`).

## API
Основные контроллеры:
-   `GroupsController` (`/api/v1/groups`): Управление группами и их составом.

## Архитектура и реализация

### Основные компоненты
-   **GroupsService**: Сервис уровня приложения.
    -   `createGroup` / `archiveGroup`: Выполняются напрямую через репозиторий.
    -   `changeGroup`, `addStudents`, `removeStudents`: Делегируют логику командам.
-   **GroupAggregate**: Доменный агрегат. Содержит название, статус и список ID участников.
-   **IGroupsRepository**: Интерфейс для сохранения и загрузки групп.

### Команды (Commands)
Модуль использует паттерн Command для части операций изменения состояния.
-   **`ChangeGroupCommand`**: Изменяет название группы.
-   **`AddStudentsCommand`**: Добавляет участников в группу. Проверяет, что участники связаны с администратором.
-   **`RemoveStudentsCommand`**: Удаляет участников из группы.

## Для новых разработчиков

### Структура модуля
```
groups/
├── api/                 # Presentation Layer (контроллеры, DTO)
├── infrastructure/     # Infrastructure Layer (реализации интерфейсов)
│   └── persistence/
├── model/               # Domain Layer (сущности, сервисы, интерфейсы)
│   ├── domain/
│   └── services/
└── index.ts             # Экспорт модуля
```

### Основные потоки данных

1. **Создание группы**:
   - Контроллер GroupsController получает запрос на создание группы
   - GroupsService напрямую создает группу через репозиторий

2. **Добавление участников в группу**:
   - Контроллер GroupsController получает запрос на добавление участников
   - GroupsService создает экземпляр AddStudentsCommand
   - Команда проверяет права доступа и добавляет участников в группу

### Интеграции с другими модулями

- **Accounts**: Для проверки связи между участниками и администраторами
- **Invites**: Для добавления участников в группы через приглашения

### Важные особенности

- Группы могут быть архивированы, но не удалены
- Участники могут быть добавлены, только если они связаны с администратором
- Модуль использует Dependency Injection для подключения зависимостей
- Для работы с базой данных используется Prisma ORM
- Некоторые операции выполняются напрямую через сервис, а некоторые через команды
